var weight0To5BoysL = [0.3487, 0.2297, 0.197, 0.1738, 0.1553, 0.1395, 0.1257, 0.1134, 0.1021, 0.0917, 0.082, 0.073, 0.0644, 0.0563, 0.0487, 0.0413, 0.0343, 0.0275, 0.0211, 0.0148, 0.0087, 0.0029, -0.0028, -0.0083, -0.0137, -0.0189, -0.024, -0.0289, -0.0337, -0.0385, -0.0431, -0.0476, -0.052, -0.0564, -0.0606, -0.0648, -0.0689, -0.0729, -0.0769, -0.0808, -0.0846, -0.0883, -0.092, -0.0957, -0.0993, -0.1028, -0.1063, -0.1097, -0.1131, -0.1165, -0.1198, -0.123, -0.1262, -0.1294, -0.1325, -0.1356, -0.1387, -0.1417, -0.1447, -0.1477, -0.1506]
var weight0To5BoysM = [3.3464, 4.4709, 5.5675, 6.3762, 7.0023, 7.5105, 7.934, 8.297, 8.6151, 8.9014, 9.1649, 9.4122, 9.6479, 9.8749, 10.0953, 10.3108, 10.5228, 10.7319, 10.9385, 11.143, 11.3462, 11.5486, 11.7504, 11.9514, 12.1515, 12.3502, 12.5466, 12.7401, 12.9303, 13.1169, 13.3, 13.4798, 13.6567, 13.8309, 14.0031, 14.1736, 14.3429, 14.5113, 14.6791, 14.8466, 15.014, 15.1813, 15.3486, 15.5158, 15.6828, 15.8497, 16.0163, 16.1827, 16.3489, 16.515, 16.6811, 16.8471, 17.0132, 17.1792, 17.3452, 17.5111, 17.6768, 17.8422, 18.0073, 18.1722, 18.3366]
var weight0To5BoysS = [0.14602, 0.13395, 0.12385, 0.11727, 0.11316, 0.1108, 0.10958, 0.10902, 0.10882, 0.10881, 0.10891, 0.10906, 0.10925, 0.10949, 0.10976, 0.11007, 0.11041, 0.11079, 0.11119, 0.11164, 0.11211, 0.11261, 0.11314, 0.11369, 0.11426, 0.11485, 0.11544, 0.11604, 0.11664, 0.11723, 0.11781, 0.11839, 0.11896, 0.11953, 0.12008, 0.12062, 0.12116, 0.12168, 0.1222, 0.12271, 0.12322, 0.12373, 0.12425, 0.12478, 0.12531, 0.12586, 0.12643, 0.127, 0.12759, 0.12819, 0.1288, 0.12943, 0.13005, 0.13069, 0.13133, 0.13197, 0.13261, 0.13325, 0.13389, 0.13453, 0.13517]

var weight0To5GirlsL = [0.3809, 0.1714, 0.0962, 0.0402, -0.005, -0.043, -0.0756, -0.1039, -0.1288, -0.1507, -0.17, -0.1872, -0.2024, -0.2158, -0.2278, -0.2384, -0.2478, -0.2562, -0.2637, -0.2703, -0.2762, -0.2815, -0.2862, -0.2903, -0.2941, -0.2975, -0.3005, -0.3032, -0.3057, -0.308, -0.3101, -0.312, -0.3138, -0.3155, -0.3171, -0.3186, -0.3201, -0.3216, -0.323, -0.3243, -0.3257, -0.327, -0.3283, -0.3296, -0.3309, -0.3322, -0.3335, -0.3348, -0.3361, -0.3374, -0.3387, -0.34, -0.3414, -0.3427, -0.344, -0.3453, -0.3466, -0.3479, -0.3492, -0.3505, -0.3518]
var weight0To5GirlsM = [3.2322, 4.1873, 5.1282, 5.8458, 6.4237, 6.8985, 7.297, 7.6422, 7.9487, 8.2254, 8.48, 8.7192, 8.9481, 9.1699, 9.387, 9.6008, 9.8124, 10.0226, 10.2315, 10.4393, 10.6464, 10.8534, 11.0608, 11.2688, 11.4775, 11.6864, 11.8947, 12.1015, 12.3059, 12.5073, 12.7055, 12.9006, 13.093, 13.2837, 13.4731, 13.6618, 13.8503, 14.0385, 14.2265, 14.414, 14.601, 14.7873, 14.9727, 15.1573, 15.341, 15.524, 15.7064, 15.8882, 16.0697, 16.2511, 16.4322, 16.6133, 16.7942, 16.9748, 17.1551, 17.3347, 17.5136, 17.6916, 17.8686, 18.0445, 18.2193]
var weight0To5GirlsS = [0.14171, 0.13724, 0.13, 0.12619, 0.12402, 0.12274, 0.12204, 0.12178, 0.12181, 0.12199, 0.12223, 0.12247, 0.12268, 0.12283, 0.12294, 0.12299, 0.12303, 0.12306, 0.12309, 0.12315, 0.12323, 0.12335, 0.1235, 0.12369, 0.1239, 0.12414, 0.12441, 0.12472, 0.12506, 0.12545, 0.12587, 0.12633, 0.12683, 0.12737, 0.12794, 0.12855, 0.12919, 0.12988, 0.13059, 0.13135, 0.13213, 0.13293, 0.13376, 0.1346, 0.13545, 0.1363, 0.13716, 0.138, 0.13884, 0.13968, 0.14051, 0.14132, 0.14213, 0.14293, 0.14371, 0.14448, 0.14525, 0.146, 0.14675, 0.14748, 0.14821]

var height0To5BoysM = [49.8842, 54.7244, 58.4249, 61.4292, 63.886, 65.9026, 67.6236, 69.1645, 70.5994, 71.9687, 73.2812, 74.5388, 75.7488, 76.9186, 78.0497, 79.1458, 80.2113, 81.2487, 82.2587, 83.2418, 84.1996, 85.1348, 86.0477, 86.941, 87.8161, 87.972, 88.8065, 89.6197, 90.412, 91.1828, 91.9327, 92.6631, 93.3753, 94.0711, 94.7532, 95.4236, 96.0835, 96.7337, 97.3749, 98.0073, 98.631, 99.2459, 99.8515, 100.4485, 101.0374, 101.6186, 102.1933, 102.7625, 103.3273, 103.8886, 104.4473, 105.0041, 105.5596, 106.1138, 106.6668, 107.2188, 107.7697, 108.3198, 108.8689, 109.417, 109.9638]
var height0To5BoysS = [0.03795, 0.03557, 0.03424, 0.03328, 0.03257, 0.03204, 0.03165, 0.03139, 0.03124, 0.03117, 0.03118, 0.03125, 0.03137, 0.03154, 0.03174, 0.03197, 0.03222, 0.0325, 0.03279, 0.0331, 0.03342, 0.03376, 0.0341, 0.03445, 0.03479, 0.03542, 0.03576, 0.0361, 0.03642, 0.03674, 0.03704, 0.03733, 0.03761, 0.03787, 0.03812, 0.03836, 0.03858, 0.03879, 0.039, 0.03919, 0.03937, 0.03954, 0.03971, 0.03986, 0.04002, 0.04016, 0.04031, 0.04045, 0.04059, 0.04073, 0.04086, 0.041, 0.04113, 0.04126, 0.04139, 0.04152, 0.04165, 0.04177, 0.0419, 0.04202, 0.04214]

var height0To5GirlsM = [49.1477, 53.6872, 57.0673, 59.8029, 62.0899, 64.0301, 65.7311, 67.2873, 68.7498, 70.1435, 71.4818, 72.771, 74.015, 75.2176, 76.3817, 77.5099, 78.6055, 79.671, 80.7079, 81.7182, 82.7036, 83.6654, 84.604, 85.5202, 86.4153, 86.5904, 87.4462, 88.283, 89.1004, 89.8991, 90.6797, 91.443, 92.1906, 92.9239, 93.6444, 94.3533, 95.0515, 95.7399, 96.4187, 97.0885, 97.7493, 98.4015, 99.0448, 99.6795, 100.3058, 100.9238, 101.5337, 102.136, 102.7312, 103.3197, 103.9021, 104.4786, 105.0494, 105.6148, 106.1748, 106.7295, 107.2788, 107.8227, 108.3613, 108.8948, 109.4233]
var height0To5GirlsS = [0.0379, 0.0364, 0.03568, 0.0352, 0.03486, 0.03463, 0.03448, 0.03441, 0.0344, 0.03444, 0.03452, 0.03464, 0.03479, 0.03496, 0.03514, 0.03534, 0.03555, 0.03576, 0.03598, 0.0362, 0.03643, 0.03666, 0.03688, 0.03711, 0.03734, 0.03786, 0.03808, 0.0383, 0.03851, 0.03872, 0.03893, 0.03913, 0.03933, 0.03952, 0.03971, 0.03989, 0.04006, 0.04024, 0.04041, 0.04057, 0.04073, 0.04089, 0.04105, 0.0412, 0.04135, 0.0415, 0.04164, 0.04179, 0.04193, 0.04206, 0.0422, 0.04233, 0.04246, 0.04259, 0.04272, 0.04285, 0.04298, 0.0431, 0.04322, 0.04334, 0.04347]


let weight = 0;
let height = 1;
let years = 0;
let months = 0;
let weeks = 0;
let male = true;

radiobtn = document.getElementById("male");
radiobtn.checked = true;

console.log("Test");

document.getElementById('male').addEventListener('change', (e) => {
    male = true;
    performAllCalculations();

});

document.getElementById('female').addEventListener('change', (e) => {
    male = false;
    performAllCalculations();

});

document.getElementById('years').addEventListener('input', (e) => {
    years = e.target.value;
    performAllCalculations();
});

document.getElementById('months').addEventListener('input', (e) => {
    months = e.target.value;
    performAllCalculations();

});

document.getElementById('height').addEventListener('input', (e) => {
    height = e.target.value;
    performAllCalculations();

});

document.getElementById('weight').addEventListener('input', (e) => {
    weight = e.target.value;
    performAllCalculations();

});

function imc() {
    var imc = weight / (height/100 * height/100);
    document.getElementById('imc').innerHTML = "IMC: " + imc.toFixed(2);
}

function standardNormalCDF(x) {
    return (1 - math.erf(-x / math.sqrt(2))) / 2;
}

function performAllCalculations() {
    if (male) {
        BoyWeightPercentile();
        BoyHeightPercentile();
    }
    else  {
        GirlWeightPercentile();
        GirlHeightPercentile();
    }
    imc();
}

function BoyWeightPercentile() {
    var m = years* 12 + parseFloat(months);
    var z = (math.pow(weight/weight0To5BoysM[m], weight0To5BoysL[m]) -1) / (weight0To5BoysL[m] * weight0To5BoysS[m]);
    var percentile = standardNormalCDF(z) * 100;
    document.getElementById("wp").innerHTML = "Weight For Age Percentile: " + percentile.toFixed(0);
}

function GirlWeightPercentile() {
    var m = years* 12 + parseFloat(months);
    var z = (math.pow(weight/weight0To5GirlsM[m], weight0To5GirlsL[m]) -1) / (weight0To5GirlsL[m] * weight0To5GirlsS[m]);
    var percentile = standardNormalCDF(z) * 100;
    document.getElementById("wp").innerHTML = "Weight For Age Percentile: " + percentile.toFixed(0);
}

function BoyHeightPercentile() {
    var m = years* 12 + parseFloat(months);
    var z = ((height/height0To5BoysM[m]) -1) / (height0To5BoysS[m]);
    var percentile = standardNormalCDF(z) * 100;
    document.getElementById("hp").innerHTML = "Height For Age Percentile: " + percentile.toFixed(0);
}

function GirlHeightPercentile() {
    var m = years* 12 + parseFloat(months);
    var z = (height/height0To5GirlsM[m] -1) / (1 * height0To5GirlsS[m]);
    var percentile = standardNormalCDF(z) * 100;
    document.getElementById("hp").innerHTML = "Height For Age Percentile: " + percentile.toFixed(0);
}